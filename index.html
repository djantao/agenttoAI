<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI学习助手</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- 配置弹窗 -->
    <div id="configModal" class="modal">
        <div class="modal-content">
            <h2>初始配置</h2>
            <p>请输入以下配置信息，以便使用AI学习助手</p>
            <form id="configForm">
                <div class="form-group">
                    <label for="doubaoApiUrl">豆包API地址：</label>
                    <input type="text" id="doubaoApiUrl" placeholder="例如：https://ark.cn-beijing.volces.com/api/v3/chat/completions" required value="https://ark.cn-beijing.volces.com/api/v3/chat/completions">
                </div>
                <div class="form-group">
                    <label for="doubaoModel">豆包模型名称：</label>
                    <input type="text" id="doubaoModel" placeholder="例如：doubao-1-5-pro-32k-250115, doubao-lite, doubao-pro" required value="doubao-1-5-pro-32k-250115">
                </div>
                <div class="form-group">
                    <label for="doubaoApiKey">豆包API密钥：</label>
                    <input type="password" id="doubaoApiKey" placeholder="请输入豆包API密钥" required autocomplete="new-password">
                </div>
                <div class="form-group">
                    <label for="notionApiToken">Notion API Token：</label>
                    <input type="password" id="notionApiToken" placeholder="请输入Notion API Token" required autocomplete="new-password">
                </div>
                <div class="form-group">
                    <label for="notionDatabaseId">Notion数据库ID：</label>
                    <input type="text" id="notionDatabaseId" placeholder="请输入Notion数据库ID" required>
                </div>
                <div class="form-actions">
                    <button type="submit" class="submit-btn">保存配置</button>
                </div>
            </form>
        </div>
    </div>

    <div class="container">
        <header>
            <h1>AI学习助手</h1>
            <p>通过对话分析您的学习需求，生成个性化课程列表</p>
        </header>
        
        <main>
            <!-- Tab 导航栏 -->
            <div class="tab-container">
                <div class="tab-nav">
                    <button class="tab-btn active" data-tab="course-generation">课程生成</button>
                    <button class="tab-btn" data-tab="course-learning">课程学习</button>
                </div>
                
                <!-- Tab 内容区 -->
                <div class="tab-content">
                    <!-- 课程生成 Tab -->
                    <div class="tab-panel active" id="course-generation">
                        <div class="chat-container" id="chatContainer">
                            <h2>课程生成对话</h2>
                            <div class="chat-messages" id="chatMessages">
                            </div>
                            
                            <div class="input-container">
                                <input type="text" id="userInput" placeholder="请输入您的回答..." autocomplete="off">
                                <button id="sendBtn">发送</button>
                            </div>
                        </div>
                        
                        <div class="course-container" id="courseContainer" style="display: none;">
                            <h2>生成的课程列表</h2>
                            <div class="courses" id="coursesList"></div>
                            <button id="syncToNotion" class="sync-btn">同步到Notion</button>
                        </div>
                    </div>
                    
                    <!-- 课程学习 Tab -->
                    <div class="tab-panel" id="course-learning">
                        <div class="learning-container" id="learningContainer">
                            <h2>课程学习</h2>
                            
                            <!-- 断点续学提示 -->
                            <div class="continue-learning-prompt" id="continueLearningPrompt" style="display: none;">
                                <p>检测到您上次学习《<span id="lastCourseChapter"></span>》，是否继续？</p>
                                <div class="prompt-actions">
                                    <button id="continueBtn" class="continue-btn">继续学习</button>
                                    <button id="restartBtn" class="restart-btn">重新开始</button>
                                </div>
                            </div>
                            
                            <div class="learning-controls">
                                <div class="form-group">
                                    <label for="courseSelect">选择课程：</label>
                                    <select id="courseSelect" disabled>
                                        <option value="">请选择课程</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="chapterSelect">选择章节：</label>
                                    <select id="chapterSelect" disabled>
                                        <option value="">请选择章节</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="learning-chat-container">
                                <div class="chat-messages" id="learningChatMessages">
                                </div>
                                
                                <div class="input-container">
                                    <textarea id="learningInput" placeholder="请输入您的学习问题..." autocomplete="off" disabled rows="3"></textarea>
                                    <button id="sendLearningBtn" disabled>发送</button>
                                    <button id="stopLearningBtn" disabled>停止学习</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- 确认弹窗 -->
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <h2>确认停止学习</h2>
            <p>确定要停止当前学习并同步到Notion吗？</p>
            <div class="form-actions">
                <button id="confirmStopBtn" class="submit-btn">确认</button>
                <button id="cancelStopBtn" class="cancel-btn">取消</button>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>