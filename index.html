<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI学习助手</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- 配置弹窗 -->
    <div id="configModal" class="modal">
        <div class="modal-content">
            <h2>初始配置</h2>
            <p>请输入以下配置信息，以便使用AI学习助手</p>
            <form id="configForm">
                <div class="form-group">
                    <label for="doubaoApiUrl">豆包API地址：</label>
                    <input type="text" id="doubaoApiUrl" placeholder="例如：https://ark.cn-beijing.volces.com/api/v3/chat/completions" required value="https://ark.cn-beijing.volces.com/api/v3/chat/completions">
                </div>
                <div class="form-group">
                    <label for="doubaoModel">豆包模型名称：</label>
                    <input type="text" id="doubaoModel" placeholder="例如：doubao-1-5-pro-32k-250115, doubao-lite, doubao-pro" required value="doubao-1-5-pro-32k-250115">
                </div>
                <div class="form-group">
                    <label for="doubaoApiKey">豆包API密钥：</label>
                    <input type="password" id="doubaoApiKey" placeholder="请输入豆包API密钥" required autocomplete="new-password">
                </div>
                <div class="form-group">
                    <label for="notionApiToken">Notion API Token：</label>
                    <input type="password" id="notionApiToken" placeholder="请输入Notion API Token" required autocomplete="new-password">
                </div>
                <div class="form-group">
                    <label for="notionDatabaseId">Notion课程数据库ID：</label>
                    <input type="text" id="notionDatabaseId" placeholder="课程数据库ID（已写死）" required value="2e43af348d578057bbe7d85ea7ef73fa" readonly>
                </div>
                <div class="form-group">
                    <label for="notionProxyUrl">Notion代理URL（可选）：</label>
                    <input type="text" id="notionProxyUrl" placeholder="例如：https://notion-proxy.your-account.workers.dev" value="https://notion-proxy.timbabys80.workers.dev/">
                </div>
                <div class="form-group">
                    <label for="githubToken">GitHub Token（可选，用于保存对话记录）：</label>
                    <input type="password" id="githubToken" placeholder="请输入GitHub Personal Access Token" autocomplete="new-password">
                    <small>获取方式：GitHub > Settings > Developer settings > Personal access tokens > Generate new token</small>
                </div>
                <div class="form-actions">
                    <button type="submit" class="submit-btn">保存配置</button>
                </div>
            </form>
        </div>
    </div>

    <div class="container">
        <header>
            <h1>AI学习助手</h1>
            <p>通过对话分析您的学习需求，生成个性化课程列表</p>
        </header>
        
        <main>
            <!-- 页签导航栏 -->
            <div class="tab-nav">
                <button id="courseGenTab" class="tab-btn active" data-tab="course-generation">课程生成</button>
                <button id="learningTab" class="tab-btn" data-tab="learning">学习中心</button>
            </div>
            
            <!-- 页签内容区域 -->
            <div class="tab-content">
                <!-- 课程生成页签 -->
                <div id="course-generation" class="tab-pane active">
                    <!-- 对话区域 -->
                    <div id="conversationInterface" class="chat-container">
                        <div id="chatHistory" class="chat-history">
                            <!-- 对话历史将显示在这里 -->
                        </div>
                        <div class="chat-input-area">
                            <textarea id="userInput" placeholder="请输入您的回答..." disabled></textarea>
                            <button id="sendBtn" disabled>发送</button>
                            <button id="resetBtn" class="reset-btn">重置</button>
                        </div>
                    </div>
                    
                    <!-- 课程列表区域 -->
                    <div id="courseList" class="course-list hidden">
                        <h2>生成的课程列表</h2>
                        <div id="courses" class="courses"></div>
                        <div class="course-actions">
                            <button id="syncToNotion" class="sync-btn">同步到Notion</button>
                            <button id="regenerateBtn" class="regenerate-btn">重新生成</button>
                        </div>
                    </div>
                </div>
                
                <!-- 学习中心页签 -->
                <div id="learning" class="tab-pane">
                    <div id="learningInterface" class="learning-interface">
                        <h2>AI学习助手</h2>
                        
                        <!-- 课程和章节选择 -->
                        <div class="course-chapter-selector">
                            <div class="select-group">
                                <label for="courseSelect">选择课程：</label>
                                <select id="courseSelect">
                                    <option value="">请选择课程</option>
                                </select>
                            </div>
                            <div class="select-group">
                                <label for="chapterSelect">选择章节：</label>
                                <select id="chapterSelect" disabled>
                                    <option value="">请先选择课程</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- 学习按钮组 -->
                        <div class="learning-controls">
                            <button id="continueLearningBtn" class="continue-btn">继续学习</button>
                            <button id="stopLearningBtn" class="stop-btn" disabled>停止学习</button>
                        </div>
                        
                        <!-- 学习聊天区域 -->
                        <div class="learning-chat-container">
                            <div id="learningChatHistory" class="learning-chat-history">
                                <!-- 学习对话历史将显示在这里 -->
                            </div>
                            <div class="learning-chat-input-area">
                                <textarea id="learningUserInput" placeholder="请输入您的学习问题..." disabled></textarea>
                                <button id="learningSendBtn" disabled>发送</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>